const translations = {
  pt: {
    // Header
    title: "Bavel",
    settings: "Configurações",
    
    // Welcome Screen
    welcomeTitle: "Configurar Idioma",
    welcomeDescription: "Configure seu idioma nativo para receber traduções e sugestões personalizadas.",
    nativeLanguageLabel: "Seu idioma nativo:",
    saveConfiguration: "Salvar Configuração",
    languageConfigured: "Idioma configurado!",
    
    // Idle Screen
    readyToUse: "Pronto para usar!",
    idleDescription: "Selecione um texto em qualquer página e clique com o botão direito do mouse.",
    step1: "Selecione um texto",
    step2: "Clique com botão direito",
    step3: "Escolha \"Opinar com Bavel\"",
    changeLanguage: "Alterar Idioma",
    
    // Analysis Screen
    originalText: "Texto Original",
    translation: "Tradução",
    context: "Contexto",
    suggestions: "Sugestões de Resposta",
    yourResponse: "Sua Resposta",
    responsePlaceholder: "Escreva sua resposta no idioma original...",
    translateResponse: "Traduzir Resposta",
    copy: "Copiar",
    
    // Messages
    writeResponseFirst: "Escreva uma resposta primeiro",
    noResponseToCopy: "Nenhuma resposta para copiar",
    responseCopied: "Resposta copiada!",
    copyError: "Erro ao copiar",
    analyzing: "Analisando texto...",
    
    // Loading
    processingText: "Processando Texto",
    extractingContext: "Extraindo contexto",
    translating: "Traduzindo",
    generatingSuggestions: "Gerando sugestões",
    
    // Translation
    alternatives: "Alternativas",
    alternativeSelected: "Alternativa selecionada!",
    confidence: "Confiança",
    
    // Meta
    words: "palavras",
    translationLabel: "Tradução:",
    
    // Context Menu
    contextMenuTitle: "Opinar com Bavel",
    
    // Language Names
    languages: {
      pt: "Português",
      en: "English", 
      es: "Español",
      fr: "Français",
      de: "Deutsch",
      it: "Italiano"
    }
  },

  en: {
    // Header
    title: "Bavel",
    settings: "Settings",
    
    // Welcome Screen
    welcomeTitle: "Configure Language",
    welcomeDescription: "Set your native language to receive personalized translations and suggestions.",
    nativeLanguageLabel: "Your native language:",
    saveConfiguration: "Save Configuration",
    languageConfigured: "Language configured!",
    
    // Idle Screen
    readyToUse: "Ready to use!",
    idleDescription: "Select text on any page and right-click with your mouse.",
    step1: "Select some text",
    step2: "Right-click",
    step3: "Choose \"Comment with Bavel\"",
    changeLanguage: "Change Language",
    
    // Analysis Screen
    originalText: "Original Text",
    translation: "Translation",
    context: "Context",
    suggestions: "Response Suggestions",
    yourResponse: "Your Response",
    responsePlaceholder: "Write your response in the original language...",
    translateResponse: "Translate Response",
    copy: "Copy",
    
    // Messages
    writeResponseFirst: "Write a response first",
    noResponseToCopy: "No response to copy",
    responseCopied: "Response copied!",
    copyError: "Copy error",
    analyzing: "Analyzing text...",
    
    // Loading
    processingText: "Processing Text",
    extractingContext: "Extracting context",
    translating: "Translating",
    generatingSuggestions: "Generating suggestions",
    
    // Translation
    alternatives: "Alternatives",
    alternativeSelected: "Alternative selected!",
    confidence: "Confidence",
    
    // Meta
    words: "words",
    translationLabel: "Translation:",
    
    // Context Menu
    contextMenuTitle: "Comment with Bavel",
    
    // Language Names
    languages: {
      pt: "Português",
      en: "English", 
      es: "Español",
      fr: "Français",
      de: "Deutsch",
      it: "Italiano"
    }
  },

  es: {
    // Header
    title: "Bavel",
    settings: "Configuración",
    
    // Welcome Screen
    welcomeTitle: "Configurar Idioma",
    welcomeDescription: "Configure su idioma nativo para recibir traducciones y sugerencias personalizadas.",
    nativeLanguageLabel: "Su idioma nativo:",
    saveConfiguration: "Guardar Configuración",
    languageConfigured: "¡Idioma configurado!",
    
    // Idle Screen
    readyToUse: "¡Listo para usar!",
    idleDescription: "Seleccione texto en cualquier página y haga clic derecho con el mouse.",
    step1: "Seleccione un texto",
    step2: "Haga clic derecho",
    step3: "Elija \"Opinar con Bavel\"",
    changeLanguage: "Cambiar Idioma",
    
    // Analysis Screen
    originalText: "Texto Original",
    translation: "Traducción",
    context: "Contexto",
    suggestions: "Sugerencias de Respuesta",
    yourResponse: "Su Respuesta",
    responsePlaceholder: "Escriba su respuesta en el idioma original...",
    translateResponse: "Traducir Respuesta",
    copy: "Copiar",
    
    // Messages
    writeResponseFirst: "Escriba una respuesta primero",
    noResponseToCopy: "No hay respuesta para copiar",
    responseCopied: "¡Respuesta copiada!",
    copyError: "Error al copiar",
    analyzing: "Analizando texto...",
    
    // Meta
    words: "palabras",
    translationLabel: "Traducción:",
    
    // Context Menu
    contextMenuTitle: "Opinar con Bavel",
    
    // Language Names
    languages: {
      pt: "Português",
      en: "English", 
      es: "Español",
      fr: "Français",
      de: "Deutsch",
      it: "Italiano"
    }
  },

  fr: {
    // Header
    title: "Bavel",
    settings: "Paramètres",
    
    // Welcome Screen
    welcomeTitle: "Configurer la Langue",
    welcomeDescription: "Définissez votre langue maternelle pour recevoir des traductions et suggestions personnalisées.",
    nativeLanguageLabel: "Votre langue maternelle:",
    saveConfiguration: "Enregistrer la Configuration",
    languageConfigured: "Langue configurée!",
    
    // Idle Screen
    readyToUse: "Prêt à utiliser!",
    idleDescription: "Sélectionnez du texte sur n'importe quelle page et cliquez droit avec votre souris.",
    step1: "Sélectionnez du texte",
    step2: "Clic droit",
    step3: "Choisissez \"Commenter avec Bavel\"",
    changeLanguage: "Changer de Langue",
    
    // Analysis Screen
    originalText: "Texte Original",
    translation: "Traduction",
    context: "Contexte",
    suggestions: "Suggestions de Réponse",
    yourResponse: "Votre Réponse",
    responsePlaceholder: "Écrivez votre réponse dans la langue originale...",
    translateResponse: "Traduire la Réponse",
    copy: "Copier",
    
    // Messages
    writeResponseFirst: "Écrivez d'abord une réponse",
    noResponseToCopy: "Aucune réponse à copier",
    responseCopied: "Réponse copiée!",
    copyError: "Erreur de copie",
    analyzing: "Analyse du texte...",
    
    // Meta
    words: "mots",
    translationLabel: "Traduction:",
    
    // Context Menu
    contextMenuTitle: "Commenter avec Bavel",
    
    // Language Names
    languages: {
      pt: "Português",
      en: "English", 
      es: "Español",
      fr: "Français",
      de: "Deutsch",
      it: "Italiano"
    }
  },

  de: {
    // Header
    title: "Bavel",
    settings: "Einstellungen",
    
    // Welcome Screen
    welcomeTitle: "Sprache Konfigurieren",
    welcomeDescription: "Stellen Sie Ihre Muttersprache ein, um personalisierte Übersetzungen und Vorschläge zu erhalten.",
    nativeLanguageLabel: "Ihre Muttersprache:",
    saveConfiguration: "Konfiguration Speichern",
    languageConfigured: "Sprache konfiguriert!",
    
    // Idle Screen
    readyToUse: "Bereit zur Nutzung!",
    idleDescription: "Wählen Sie Text auf einer beliebigen Seite aus und klicken Sie mit der rechten Maustaste.",
    step1: "Text auswählen",
    step2: "Rechtsklick",
    step3: "\"Mit Bavel kommentieren\" wählen",
    changeLanguage: "Sprache Ändern",
    
    // Analysis Screen
    originalText: "Originaltext",
    translation: "Übersetzung",
    context: "Kontext",
    suggestions: "Antwort-Vorschläge",
    yourResponse: "Ihre Antwort",
    responsePlaceholder: "Schreiben Sie Ihre Antwort in der Originalsprache...",
    translateResponse: "Antwort Übersetzen",
    copy: "Kopieren",
    
    // Messages
    writeResponseFirst: "Schreiben Sie zuerst eine Antwort",
    noResponseToCopy: "Keine Antwort zum Kopieren",
    responseCopied: "Antwort kopiert!",
    copyError: "Kopierfehler",
    analyzing: "Text wird analysiert...",
    
    // Meta
    words: "Wörter",
    translationLabel: "Übersetzung:",
    
    // Context Menu
    contextMenuTitle: "Mit Bavel kommentieren",
    
    // Language Names
    languages: {
      pt: "Português",
      en: "English", 
      es: "Español",
      fr: "Français",
      de: "Deutsch",
      it: "Italiano"
    }
  },

  it: {
    // Header
    title: "Bavel",
    settings: "Impostazioni",
    
    // Welcome Screen
    welcomeTitle: "Configura Lingua",
    welcomeDescription: "Imposta la tua lingua madre per ricevere traduzioni e suggerimenti personalizzati.",
    nativeLanguageLabel: "La tua lingua madre:",
    saveConfiguration: "Salva Configurazione",
    languageConfigured: "Lingua configurata!",
    
    // Idle Screen
    readyToUse: "Pronto all'uso!",
    idleDescription: "Seleziona del testo su qualsiasi pagina e fai clic destro con il mouse.",
    step1: "Seleziona del testo",
    step2: "Clic destro",
    step3: "Scegli \"Commenta con Bavel\"",
    changeLanguage: "Cambia Lingua",
    
    // Analysis Screen
    originalText: "Testo Originale",
    translation: "Traduzione",
    context: "Contesto",
    suggestions: "Suggerimenti di Risposta",
    yourResponse: "La Tua Risposta",
    responsePlaceholder: "Scrivi la tua risposta nella lingua originale...",
    translateResponse: "Traduci Risposta",
    copy: "Copia",
    
    // Messages
    writeResponseFirst: "Scrivi prima una risposta",
    noResponseToCopy: "Nessuna risposta da copiare",
    responseCopied: "Risposta copiata!",
    copyError: "Errore nella copia",
    analyzing: "Analizzando il testo...",
    
    // Meta
    words: "parole",
    translationLabel: "Traduzione:",
    
    // Context Menu
    contextMenuTitle: "Commenta con Bavel",
    
    // Language Names
    languages: {
      pt: "Português",
      en: "English", 
      es: "Español",
      fr: "Français",
      de: "Deutsch",
      it: "Italiano"
    }
  }
};

class I18n {
  constructor() {
    this.currentLanguage = 'pt';
  }

  async init() {
    const result = await chrome.storage.sync.get(['userLanguage']);
    this.currentLanguage = result.userLanguage || 'pt';
  }

  setLanguage(lang) {
    this.currentLanguage = lang;
  }

  t(key) {
    const keys = key.split('.');
    let value = translations[this.currentLanguage];
    
    for (const k of keys) {
      value = value?.[k];
    }
    
    return value || key;
  }

  getLanguageName(code) {
    return this.t(`languages.${code}`) || code;
  }
}

const i18n = new I18n();

if (typeof module !== 'undefined' && module.exports) {
  module.exports = { I18n, i18n, translations };
}