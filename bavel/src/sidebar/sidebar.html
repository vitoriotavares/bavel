<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bavel</title>
    <link rel="stylesheet" href="sidebar.css">
</head>
<body>
    <div class="sidebar-container">
        <header class="sidebar-header">
            <div class="logo">
                <img src="../../assets/icons/logo_sem_fundoV2.png" alt="Bavel" class="logo-icon" style="height: auto;">
                <h1>Bavel</h1>
            </div>
            <button id="settingsBtn" class="settings-btn" data-i18n-title="settings">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Solar by 480 Design - https://creativecommons.org/licenses/by/4.0/ --><path fill="currentColor" fill-rule="evenodd" d="M14.279 2.152C13.909 2 13.439 2 12.5 2s-1.408 0-1.779.152a2 2 0 0 0-1.09 1.083c-.094.223-.13.484-.145.863a1.62 1.62 0 0 1-.796 1.353a1.64 1.64 0 0 1-1.579.008c-.338-.178-.583-.276-.825-.308a2.03 2.03 0 0 0-1.49.396c-.318.242-.553.646-1.022 1.453c-.47.807-.704 1.21-.757 1.605c-.07.526.074 1.058.4 1.479c.148.192.357.353.68.555c.477.297.783.803.783 1.361s-.306 1.064-.782 1.36c-.324.203-.533.364-.682.556a2 2 0 0 0-.399 1.479c.053.394.287.798.757 1.605s.704 1.21 1.022 1.453c.424.323.96.465 1.49.396c.242-.032.487-.13.825-.308a1.64 1.64 0 0 1 1.58.008c.486.28.774.795.795 1.353c.015.38.051.64.145.863c.204.49.596.88 1.09 1.083c.37.152.84.152 1.779.152s1.409 0 1.779-.152a2 2 0 0 0 1.09-1.083c.094-.223.13-.483.145-.863c.02-.558.309-1.074.796-1.353a1.64 1.64 0 0 1 1.579-.008c.338.178.583.276.825.308c.53.07 1.066-.073 1.49-.396c.318-.242.553-.646 1.022-1.453c.47-.807.704-1.21.757-1.605a2 2 0 0 0-.4-1.479c-.148-.192-.357-.353-.68-.555c-.477-.297-.783-.803-.783-1.361s.306-1.064.782-1.36c.324-.203.533-.364.682-.556a2 2 0 0 0 .399-1.479c-.053-.394-.287-.798-.757-1.605s-.704-1.21-1.022-1.453a2.03 2.03 0 0 0-1.49-.396c-.242.032-.487.13-.825.308a1.64 1.64 0 0 1-1.58-.008a1.62 1.62 0 0 1-.795-1.353c-.015-.38-.051-.64-.145-.863a2 2 0 0 0-1.09-1.083" clip-rule="evenodd" opacity=".5"/><path fill="currentColor" d="M15.523 12c0 1.657-1.354 3-3.023 3s-3.023-1.343-3.023-3S10.83 9 12.5 9s3.023 1.343 3.023 3"/></svg>
            </button>
        </header>

        <div id="welcomeScreen" class="welcome-screen">
            <!-- Floating Language Flags -->
            <div class="floating-flags">
                <div class="flag-circle flag-1" data-lang="pt">
                    <img src="../../assets/icons/CircleFlagsBr.png" alt="Bavel" class="logo-icon">
                </div>
                <div class="flag-circle flag-2" data-lang="en">
                    <img src="../../assets/icons/CircleFlagsUs.svg" alt="Bavel" class="logo-icon">
                </div>
                <div class="flag-circle flag-3" data-lang="es">
                    <img src="../../assets/icons/CircleFlagsEs.svg" alt="Bavel" class="logo-icon">
                </div>
                <div class="flag-circle flag-4" data-lang="fr">
                    <img src="../../assets/icons/CircleFlagsFr.svg" alt="Bavel" class="logo-icon">
                </div>
                <div class="flag-circle flag-5" data-lang="de">
                    <img src="../../assets/icons/CircleFlagsLangDe.svg" alt="Bavel" class="logo-icon">
                </div>
                <div class="flag-circle flag-6" data-lang="it">
                    <img src="../../assets/icons/CircleFlagsIt.svg" alt="Bavel" class="logo-icon">
                </div>
                <div class="flag-circle flag-7" data-lang="ru">
                    <img src="../../assets/icons/CircleFlagsLangRu.svg" alt="Bavel" class="logo-icon">
                </div>
                <div class="flag-circle flag-8" data-lang="zh">
                    <img src="../../assets/icons/CircleFlagsCn.svg" alt="Bavel" class="logo-icon">
                </div>
            </div>
            
            <div class="welcome-content-modern">
                <div class="welcome-card">
                    <div class="welcome-header">
                        <h1 class="welcome-title" data-i18n="appName">
                            <img src="../../assets/icons/logo_sem_fundoV2.png" alt="Bavel">
                        </h1>
                        <p class="welcome-subtitle" data-i18n="appTagline">Practice languages through contextual conversations</p>
                    </div>
                    
                    <div class="language-selector-modern">
                        <h3 data-i18n="chooseLanguage">Choose your native language</h3>
                        <div class="language-grid">
                            <button class="lang-option" data-value="pt">
                                <span class="lang-flag">
                                    <img src="../../assets/icons/CircleFlagsBr.png" alt="Bavel" class="logo-icon">
                                </span>
                                <span class="lang-name">Português</span>
                            </button>
                            <button class="lang-option" data-value="en">
                                <span class="lang-flag">
                                    <img src="../../assets/icons/CircleFlagsUs.svg" alt="Bavel" class="logo-icon">
                                </span>
                                <span class="lang-name">English</span>
                            </button>
                            <button class="lang-option" data-value="es">
                                <span class="lang-flag">
                                    <img src="../../assets/icons/CircleFlagsEs.svg" alt="Bavel" class="logo-icon">
                                </span>
                                <span class="lang-name">Español</span>
                            </button>
                            <button class="lang-option" data-value="fr">
                                <span class="lang-flag">
                                    <img src="../../assets/icons/CircleFlagsFr.svg" alt="Bavel" class="logo-icon">
                                </span>
                                <span class="lang-name">Français</span>
                            </button>
                            <button class="lang-option" data-value="de">
                                <span class="lang-flag">
                                    <img src="../../assets/icons/CircleFlagsLangDe.svg" alt="Bavel" class="logo-icon">
                                </span>
                                <span class="lang-name">Deutsch</span>
                            </button>
                            <button class="lang-option" data-value="it">
                                <span class="lang-flag">
                                    <img src="../../assets/icons/CircleFlagsIt.svg" alt="Bavel" class="logo-icon">
                                </span>
                                <span class="lang-name">Italiano</span>
                            </button>
                        </div>
                        
                        <!-- Hidden select for compatibility -->
                        <select id="nativeLanguage" style="display: none;">
                            <option value="pt">Português</option>
                            <option value="en">English</option>
                            <option value="es">Español</option>
                            <option value="fr">Français</option>
                            <option value="de">Deutsch</option>
                            <option value="it">Italiano</option>
                        </select>
                        
                        <button id="saveLanguage" class="modern-btn" disabled data-i18n="getStarted">Get Started</button>
                    </div>
                    
                    <div class="welcome-features">
                        <div class="feature-item">
                            <div class="feature">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Solar by 480 Design - https://creativecommons.org/licenses/by/4.0/ --><path fill="currentColor" fill-rule="evenodd" d="M2.028 11.25A10 10 0 0 1 12 2c-.83 0-1.57.364-2.18.921c-.605.554-1.116 1.328-1.53 2.242c-.416.92-.74 1.996-.959 3.163a20 20 0 0 0-.318 2.924zm0 1.5h4.985c.036 1.002.143 1.988.318 2.924c.22 1.167.543 2.243.959 3.163c.414.914.925 1.688 1.53 2.242c.61.557 1.35.921 2.18.921c-5.27 0-9.589-4.077-9.972-9.25" clip-rule="evenodd"/><path fill="currentColor" d="M12 2c.831 0 1.57.364 2.18.921c.605.554 1.117 1.328 1.53 2.242c.417.92.74 1.996.959 3.163c.175.936.282 1.922.318 2.924h4.985A10 10 0 0 0 12 2m4.669 13.674c-.219 1.167-.542 2.243-.959 3.163c-.413.914-.925 1.688-1.53 2.242c-.61.557-1.349.921-2.18.921c5.27 0 9.589-4.077 9.972-9.25h-4.985a20 20 0 0 1-.318 2.924"/><path fill="currentColor" d="M12 3.396c-.275 0-.63.117-1.043.495c-.416.38-.833.977-1.201 1.79c-.366.808-.663 1.784-.867 2.873c-.16.859-.26 1.768-.296 2.696h6.814a18.5 18.5 0 0 0-.296-2.696c-.204-1.09-.5-2.065-.867-2.872c-.368-.814-.784-1.41-1.2-1.791c-.414-.378-.769-.495-1.044-.495m-3.111 12.05c.204 1.09.501 2.065.867 2.873c.368.813.785 1.41 1.2 1.79c.414.379.77.496 1.044.496c.275 0 .63-.117 1.044-.495c.416-.381.832-.978 1.2-1.791c.366-.808.663-1.783.867-2.873c.161-.858.261-1.768.296-2.696H8.593c.035.928.135 1.838.296 2.696" opacity=".5"/></svg>
                            </div>
                            <span data-i18n="featureTranslate">Smart Translation</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Solar by 480 Design - https://creativecommons.org/licenses/by/4.0/ --><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4.5 9.5a7.5 7.5 0 1 1 12.501 5.59c-1.12 1.003-1.68 1.505-1.832 1.69c-.487.601-.508.65-.63 1.413c-.039.237-.039.593-.039 1.307c0 .935 0 1.402-.201 1.75a1.5 1.5 0 0 1-.549.549C13.402 22 12.935 22 12 22s-1.402 0-1.75-.201a1.5 1.5 0 0 1-.549-.549c-.201-.348-.201-.815-.201-1.75c0-.713 0-1.07-.038-1.307c-.123-.763-.144-.812-.631-1.412c-.151-.186-.712-.688-1.832-1.692A7.48 7.48 0 0 1 4.5 9.5Z"/><path d="M14.5 19.5h-5" opacity=".5"/><path stroke-linecap="round" stroke-linejoin="round" d="m12.786 8.5l-2.143 3h3l-2.143 3" opacity=".5"/></g></svg>
                            </div>
                            <span data-i18n="featureSuggestions">Response Suggestions</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Solar by 480 Design - https://creativecommons.org/licenses/by/4.0/ --><path fill="currentColor" d="m12.984 22.495l.537-.907c.416-.703.625-1.055.96-1.25c.334-.194.755-.201 1.598-.216c1.243-.021 2.023-.097 2.678-.368a4.95 4.95 0 0 0 2.68-2.68c.186-.446.28-.951.328-1.623c.025-.355.038-.533-.057-.675s-.275-.203-.636-.324c-1.511-.507-5.014-1.796-6.972-3.451c-2.207-1.867-4.182-5.66-4.889-7.115c-.14-.289-.21-.433-.334-.51c-.123-.076-.28-.074-.592-.071c-2.035.021-2.956.134-3.92.724A4.95 4.95 0 0 0 2.73 5.663C2 6.853 2 8.474 2 11.715v.99c0 2.307 0 3.46.377 4.37a4.95 4.95 0 0 0 2.681 2.679c.654.27 1.434.347 2.678.368c.842.015 1.264.022 1.598.216c.335.195.543.547.96 1.25l.537.907c.478.808 1.674.808 2.153 0" opacity=".5"/><path fill="currentColor" fill-rule="evenodd" d="M14.872.24a.766.766 0 0 1-.008 1.137l-1.102 1.014c.959.009 1.881.03 2.714.083c.715.045 1.386.114 1.97.222c.572.106 1.123.26 1.56.507a5.84 5.84 0 0 1 2 1.839c.48.721.693 1.537.794 2.52c.1.963.1 2.166.1 3.691v.042c0 .445-.387.805-.864.805c-.478 0-.865-.36-.865-.805c0-1.576 0-2.702-.091-3.578c-.09-.864-.26-1.402-.543-1.827a4.16 4.16 0 0 0-1.425-1.31c-.186-.105-.509-.214-1.004-.305a15 15 0 0 0-1.75-.195A50 50 0 0 0 13.776 4l1.088 1c.34.313.343.822.008 1.139a.91.91 0 0 1-1.222.007L11.057 3.76a.78.78 0 0 1-.257-.572c0-.215.092-.421.257-.573L13.65.232a.91.91 0 0 1 1.222.007" clip-rule="evenodd"/></svg>
                            </div>
                            <span data-i18n="featureContext">Contextual Analysis</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="idleScreen" class="idle-screen hidden">
            <div class="idle-content">
                <div class="idle-icon">
                    <img src="../../assets/icons/logo_sem_fundoV2.png" alt="Bavel">
                </div>
                <h2 data-i18n="readyToUse">Pronto para usar!</h2>
                <p data-i18n="idleDescription">Selecione um texto em qualquer página e clique com o botão direito do mouse.</p>
                <div class="idle-instructions">
                    <div class="instruction-step">
                        <span class="step-number">1</span>
                        <span data-i18n="step1">Selecione um texto</span>
                    </div>
                    <div class="instruction-step">
                        <span class="step-number">2</span>
                        <span data-i18n="step2">Clique com botão direito</span>
                    </div>
                    <div class="instruction-step">
                        <span class="step-number">3</span>
                        <span data-i18n="step3">Escolha "Opinar com Bavel"</span>
                    </div>
                </div>
                <div class="idle-footer">
                    <button id="changeLanguageBtn" class="secondary-btn" data-i18n="changeLanguage">Alterar Idioma</button>
                </div>
            </div>
        </div>

        <div id="analysisScreen" class="analysis-screen hidden">
            <!-- Modern Header with Language Info -->
            <div class="modern-header">
                <div class="language-pair">
                    <div class="source-lang">
                        <span id="detectedLanguage" class="lang-badge"></span>
                    </div>
                    <div class="lang-separator">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"/>
                        </svg>
                    </div>
                    <div class="target-lang">
                        <span class="lang-badge native-lang"></span>
                    </div>
                </div>
                <div class="word-count-modern">
                    <span id="wordCount" class="word-count"></span>
                </div>
            </div>

            <!-- Modern Tabs -->
            <div class="tabs-container">
                <div class="tabs-header">
                    <button class="tab-btn active" data-tab="translation">
                        <span data-i18n="translation">Tradução</span>
                    </button>
                    <button class="tab-btn" data-tab="definitions">
                        <span data-i18n="definitions">Definições</span>
                    </button>
                    <button class="tab-btn" data-tab="context">
                        <span data-i18n="context">Contexto</span>
                    </button>
                </div>
                
                <div class="tabs-content">
                    <!-- Translation Tab -->
                    <div id="translationTab" class="tab-content active">
                        <div class="text-card original-card">
                            <div class="card-header">
                                <h4 data-i18n="originalText">Texto Original</h4>
                            </div>
                            <div id="originalText" class="text-display"></div>
                        </div>
                        
                        <div class="text-card translation-card">
                            <div class="card-header">
                                <h4 data-i18n="translation">Tradução</h4>
                                <button class="copy-btn" id="copyTranslation" title="Copiar tradução">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                                    </svg>
                                </button>
                            </div>
                            <div id="translationText" class="text-display"></div>
                        </div>
                    </div>

                    <!-- Definitions Tab -->
                    <div id="definitionsTab" class="tab-content">
                        <div class="text-card">
                            <div class="card-header">
                                <h4 data-i18n="suggestions">Sugestões de Resposta</h4>
                            </div>
                            <div id="suggestionsList" class="suggestions-list"></div>
                        </div>
                    </div>

                    <!-- Context Tab -->
                    <div id="contextTab" class="tab-content">
                        <div class="text-card">
                            <div class="card-header">
                                <h4 data-i18n="context">Contexto</h4>
                            </div>
                            <div id="contextText" class="text-display"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Response Area -->
            <div class="response-section">
                <div class="text-card response-card">
                    <div class="card-header">
                        <h4 data-i18n="yourResponse">Sua Resposta</h4>
                    </div>
                    <textarea id="userResponse" data-i18n-placeholder="responsePlaceholder" placeholder="Escreva sua resposta no idioma original..."></textarea>
                    <div class="response-actions">
                        <button id="translateResponse" class="action-btn secondary" data-i18n="translateResponse">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/>
                            </svg>
                            <span data-i18n="translateResponse">Traduzir</span>
                        </button>
                        <button id="copyResponse" class="action-btn primary" data-i18n="copy">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </svg>
                            <span data-i18n="copy">Copiar</span>
                        </button>
                    </div>
                    <div id="responseTranslation" class="response-translation hidden"></div>
                </div>
            </div>
        </div>

        <div id="loadingScreen" class="loading-screen hidden">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <h3 data-i18n="processingText">Processando Texto</h3>
                <p class="loading-main-text" data-i18n="analyzing">Analisando texto...</p>
                <div class="loading-steps">
                    <div class="loading-step active">
                        <div class="step-icon">🔍</div>
                        <span data-i18n="extractingContext">Extraindo contexto</span>
                    </div>
                    <div class="loading-step">
                        <div class="step-icon">🌐</div>
                        <span data-i18n="translating">Traduzindo</span>
                    </div>
                    <div class="loading-step">
                        <div class="step-icon">💡</div>
                        <span data-i18n="generatingSuggestions">Gerando sugestões</span>
                    </div>
                </div>
                <div class="loading-progress">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../i18n/translations.js"></script>
    <script src="sidebar.js"></script>
</body>
</html>