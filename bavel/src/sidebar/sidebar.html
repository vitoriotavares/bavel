<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bavel</title>
    <link rel="stylesheet" href="sidebar.css">
</head>
<body>
    <div class="sidebar-container">
        <header class="sidebar-header">
            <div class="logo">
                <img src="../../assets/icons/icon32.png" alt="Bavel" class="logo-icon">
                <h1>Bavel</h1>
            </div>
            <button id="settingsBtn" class="settings-btn" data-i18n-title="settings">⚙️</button>
        </header>

        <div id="welcomeScreen" class="welcome-screen">
            <!-- Floating Language Flags -->
            <div class="floating-flags">
                <div class="flag-circle flag-1" data-lang="pt">🇧🇷</div>
                <div class="flag-circle flag-2" data-lang="en">🇺🇸</div>
                <div class="flag-circle flag-3" data-lang="es">🇪🇸</div>
                <div class="flag-circle flag-4" data-lang="fr">🇫🇷</div>
                <div class="flag-circle flag-5" data-lang="de">🇩🇪</div>
                <div class="flag-circle flag-6" data-lang="it">🇮🇹</div>
                <div class="flag-circle flag-7" data-lang="ru">🇷🇺</div>
                <div class="flag-circle flag-8" data-lang="zh">🇨🇳</div>
            </div>
            
            <div class="welcome-content-modern">
                <div class="welcome-card">
                    <div class="welcome-header">
                        <h1 class="welcome-title" data-i18n="appName">Bavel</h1>
                        <p class="welcome-subtitle" data-i18n="appTagline">Practice languages through contextual conversations</p>
                    </div>
                    
                    <div class="language-selector-modern">
                        <h3 data-i18n="chooseLanguage">Choose your native language</h3>
                        <div class="language-grid">
                            <button class="lang-option" data-value="pt">
                                <span class="lang-flag">🇧🇷</span>
                                <span class="lang-name">Português</span>
                            </button>
                            <button class="lang-option" data-value="en">
                                <span class="lang-flag">🇺🇸</span>
                                <span class="lang-name">English</span>
                            </button>
                            <button class="lang-option" data-value="es">
                                <span class="lang-flag">🇪🇸</span>
                                <span class="lang-name">Español</span>
                            </button>
                            <button class="lang-option" data-value="fr">
                                <span class="lang-flag">🇫🇷</span>
                                <span class="lang-name">Français</span>
                            </button>
                            <button class="lang-option" data-value="de">
                                <span class="lang-flag">🇩🇪</span>
                                <span class="lang-name">Deutsch</span>
                            </button>
                            <button class="lang-option" data-value="it">
                                <span class="lang-flag">🇮🇹</span>
                                <span class="lang-name">Italiano</span>
                            </button>
                        </div>
                        
                        <!-- Hidden select for compatibility -->
                        <select id="nativeLanguage" style="display: none;">
                            <option value="pt">Português</option>
                            <option value="en">English</option>
                            <option value="es">Español</option>
                            <option value="fr">Français</option>
                            <option value="de">Deutsch</option>
                            <option value="it">Italiano</option>
                        </select>
                        
                        <button id="saveLanguage" class="modern-btn" disabled data-i18n="getStarted">Get Started</button>
                    </div>
                    
                    <div class="welcome-features">
                        <div class="feature-item">
                            <div class="feature-icon">🌐</div>
                            <span data-i18n="featureTranslate">Smart Translation</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">💡</div>
                            <span data-i18n="featureSuggestions">Response Suggestions</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">🎯</div>
                            <span data-i18n="featureContext">Contextual Analysis</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="idleScreen" class="idle-screen hidden">
            <div class="idle-content">
                <div class="idle-icon">🗣️</div>
                <h2 data-i18n="readyToUse">Pronto para usar!</h2>
                <p data-i18n="idleDescription">Selecione um texto em qualquer página e clique com o botão direito do mouse.</p>
                <div class="idle-instructions">
                    <div class="instruction-step">
                        <span class="step-number">1</span>
                        <span data-i18n="step1">Selecione um texto</span>
                    </div>
                    <div class="instruction-step">
                        <span class="step-number">2</span>
                        <span data-i18n="step2">Clique com botão direito</span>
                    </div>
                    <div class="instruction-step">
                        <span class="step-number">3</span>
                        <span data-i18n="step3">Escolha "Opinar com Bavel"</span>
                    </div>
                </div>
                <div class="idle-footer">
                    <button id="changeLanguageBtn" class="secondary-btn" data-i18n="changeLanguage">Alterar Idioma</button>
                </div>
            </div>
        </div>

        <div id="analysisScreen" class="analysis-screen hidden">
            <div class="section original-text">
                <h3 data-i18n="originalText">Texto Original</h3>
                <div id="originalText" class="text-content"></div>
                <div class="text-meta">
                    <span id="detectedLanguage" class="language-tag"></span>
                    <span id="wordCount" class="word-count"></span>
                </div>
            </div>

            <div class="section translation">
                <h3 data-i18n="translation">Tradução</h3>
                <div id="translationText" class="text-content"></div>
            </div>

            <div class="section context">
                <h3 data-i18n="context">Contexto</h3>
                <div id="contextText" class="text-content"></div>
            </div>

            <div class="section suggestions">
                <h3 data-i18n="suggestions">Sugestões de Resposta</h3>
                <div id="suggestionsList" class="suggestions-list"></div>
            </div>

            <div class="section response-area">
                <h3 data-i18n="yourResponse">Sua Resposta</h3>
                <textarea id="userResponse" data-i18n-placeholder="responsePlaceholder" placeholder="Escreva sua resposta no idioma original..."></textarea>
                <div class="response-actions">
                    <button id="translateResponse" class="secondary-btn" data-i18n="translateResponse">Traduzir Resposta</button>
                    <button id="copyResponse" class="primary-btn" data-i18n="copy">Copiar</button>
                </div>
                <div id="responseTranslation" class="response-translation hidden"></div>
            </div>
        </div>

        <div id="loadingScreen" class="loading-screen hidden">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <h3 data-i18n="processingText">Processando Texto</h3>
                <p class="loading-main-text" data-i18n="analyzing">Analisando texto...</p>
                <div class="loading-steps">
                    <div class="loading-step active">
                        <div class="step-icon">🔍</div>
                        <span data-i18n="extractingContext">Extraindo contexto</span>
                    </div>
                    <div class="loading-step">
                        <div class="step-icon">🌐</div>
                        <span data-i18n="translating">Traduzindo</span>
                    </div>
                    <div class="loading-step">
                        <div class="step-icon">💡</div>
                        <span data-i18n="generatingSuggestions">Gerando sugestões</span>
                    </div>
                </div>
                <div class="loading-progress">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../i18n/translations.js"></script>
    <script src="sidebar.js"></script>
</body>
</html>